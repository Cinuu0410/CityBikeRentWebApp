<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wypożyczalnia rowerów miejskich</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/main_page_style.css}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.js"></script>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }

        .carousel-item img {
            width: 100%;
            height: 500px; /* Dostosuj tę wartość do preferowanego rozmiaru */
            object-fit: cover; /* Zapewnia zachowanie proporcji zdjęcia */
        }
    </style>
</head>

<body>

<header>
    <div class="top-bar">
        <button type="button" class="btn btn-secondary menu-toggle" onclick="toggleMenu()">
            <i class="fas fa-bars"></i> Menu
        </button>
        <h1>
            <span th:if="${loggedInUser}" th:text="${'Witaj, ' + loggedInUser.firstName + ' ' + loggedInUser.lastName + '!'}"></span>
        </h1>
        <div class="auth-buttons">
            <span th:if="${loggedInUser}">
                <!-- Dodano sekcję dla informacji o portfelu -->
                <div class="wallet-info">
                    Portfel: <span th:text="${walletBalance}"></span> PLN
                </div>
                <button type="button" class="btn btn-secondary logout-button" onclick="logout()">Wyloguj</button>
            </span>
            <span th:unless="${loggedInUser}">
                <button type="button" class="btn btn-secondary register-button" onclick="redirectToRegister()">Rejestracja</button>
                <span class="spacing"></span>
                <button type="button" class="btn btn-secondary login-button" onclick="redirectToLogin()">Logowanie</button>
            </span>
        </div>
    </div>
</header>
<div class="toolbar-menu">
    <div class="toolbar">
        <div class="toolbar-top"></div>
    </div>

    <nav class="side-menu">
        <button type="button" class="btn btn-secondary menu-toggle" onclick="toggleMenu()">
            <i class="fas fa-times"></i> Zamknij
        </button>
        <a href="/main_page_citybikerent">Strona główna</a>
        <a href="/offer">Oferta</a>
        <span th:if="${loggedInUser}">
            <a href="/wallet">Portfel</a>
        </span>
        <a href="/price_list">Cennik</a>
        <a href="/contact">Kontakt</a>
        <a href="/rent">Rezerwacje</a>
        <span th:if="${loggedInUser}">
            <a href="/my_rents">Moje rezerwacje</a>
        </span>
        <a href="/regulations">Regulamin</a>
        <a href="/about_us">O nas</a>
    </nav>
</div>

<div class="toolbar-login">
    <div class="toolbar">
        <div class="toolbar-top"></div>
    </div>
</div>

<div class="photoBelowHeader">
    <img th:src="@{/photos/rental1.png}" alt="rowery" />
</div>

<div id="carouselExample" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img th:src="@{/photos/relacja1.jpg}" class="d-block w-100" alt="Relacja 1">
        </div>
        <div class="carousel-item">
            <img th:src="@{/photos/relacja2.jpg}" class="d-block w-100" alt="Relacja 2">
        </div>
        <div class="carousel-item">
            <img th:src="@{/photos/relacja3.jpg}" class="d-block w-100" alt="Relacja 3">
        </div>
    </div>
    <div class="photoBelowHeader">
        <img th:src="@{/photos/rental.png}" alt="rowery" />
    </div>
    <a class="carousel-control-prev" href="#carouselExample" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExample" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>


<div class="description">
    <br>
    <h2>Wypożyczenie roweru miejskiego jest łatwe i wygodne. Oto kroki, które musisz podjąć:</h2>

    <ol>
        <li>Przejdź do najbliższej stacji wypożyczalni rowerów miejskich.</li>
        <li>Znajdź dostępną stację z dostępnymi rowerami.</li>
        <li>Przeczytaj instrukcje na automacie lub na stronie internetowej.</li>
        <li>Zarejestruj się lub zaloguj, używając swoich danych logowania.</li>
        <li>Wybierz rower, który chcesz wypożyczyć.</li>
        <li>Podaj wymagane informacje.</li>
        <li>Potwierdź wypożyczenie.</li>
        <li>Wyjmij rower z danej stacji.</li>
        <li>Po użyciu, zwróć rower do dowolnej dostępnej stacji.</li>
        <li>Zakończ wypożyczenie, potwierdzając zwrot roweru.</li>
    </ol>

    <h2>Wypożyczenie roweru miejskiego to świetny sposób na szybkie i ekologiczne poruszanie się po mieście!</h2>
</div>
<div class="photoBelowHeader">
    <img th:src="@{/photos/rental.png}" alt="rowery" />
</div>

<div class = "bikesMapH2">
    <h2>Znajdź najbliższe dostępne rowery</h2>
</div>

<div id="map"></div>

<footer>
    <p>2024 City Bike Rent &copy;</p>
</footer>

<!--mapa-->
<script>
    var map = L.map('map').setView([53.1324, 23.1595], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    L.control.locate({
        position: 'topright',
        drawMarker: true,
        markerStyle: {
            weight: 2,
            opacity: 1,
            fillOpacity: 0.8
        },
        circleStyle: {
            weight: 2,
            opacity: 0.5,
            fillOpacity: 0.2
        },
        icon: 'fas fa-crosshairs',
        iconLoading: 'fas fa-spinner fa-spin',
        setView: 'always',
        keepCurrentZoomLevel: true,
        strings: {
            title: "Pokaż moją lokalizację"
        },
        locateOptions: {
            enableHighAccuracy: true
        }
    }).addTo(map);

    // Dane stacji rowerowych w formie GeoJSON
    var bikeStations = [
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [23.160, 53.130]
            },
            "properties": {
                "name": "Stacja rowerowa 01",
                "description": "Przy parku Planty"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [23.182030949296035, 53.14565059810463]
            },
            "properties": {
                "name": "Stacja rowerowa 02",
                "description": "Przy barze Topolanka"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [23.159876, 53.132263]
            },
            "properties": {
                "name": "Stacja rowerowa 03",
                "description": "Przy fontannie"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [23.167112, 53.121386]
            },
            "properties": {
                "name": "Stacja rowerowa 04",
                "description": "Przy ZOO"
            }
        },
        // Dodaj więcej stacji rowerowych według potrzeb

    ];

    // Dodaj warstwę stacji rowerowych do mapy
    var bikeStationLayer = L.geoJSON(bikeStations, {
        pointToLayer: function (feature, latlng) {
            var marker = L.marker(latlng);
            marker.bindPopup('<b>' + feature.properties.name + '</b><br>' + feature.properties.description);
            return marker;
        }
    }).addTo(map);

</script>
<script>
    function logout() {
        // W tym miejscu możesz wykonać operacje związane z wylogowywaniem,
        // np. zakończenie sesji, usuwanie atrybutu 'loggedInUser' itp.

        // Następnie przekieruj użytkownika na stronę wylogowania
        window.location.href = "/logout";  // Zakładając, że masz endpoint '/logout' do obsługi wylogowywania
    }
</script>
<script>
    function toggleMenu() {
        var sideMenu = document.querySelector('.side-menu');
        sideMenu.classList.toggle('open');
    }

    function redirectToLogin() {
        window.location.href = "/login";
    }

    function redirectToRegister() {
        window.location.href = "/register";
    }
</script>



<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>

</html>
